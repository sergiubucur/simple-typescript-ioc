!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["simple-typescript-ioc"]=t():e["simple-typescript-ioc"]=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Container:()=>r,Factory:()=>o});var n=1e6;function o(e){return n+e}var r=function(){function e(){this._types=new Map,this._singletons=new Map}return e.prototype.register=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._registerType(e,t,n)},e.prototype.registerSingleton=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._registerType(e,t,n,!0)},e.prototype.disposeSingleton=function(e){if(!this._singletons.has(e))throw new Error("trying to dispose a singleton which doesn't exist");this._singletons.delete(e)},e.prototype.resolve=function(e){var t=this,o=this._types.get(e);if(!o)throw new Error("unregistered type");if(o.dependencies.length>0)return this._singleton(o,(function(){var e=o.dependencies.map((function(e){return e>=n?(e-=n,function(){return t.resolve(e)}):t.resolve(e)})),r=o.type;return new(Function.prototype.bind.apply(r,function(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e}([null],e)))}));var r=o.type;return this._singleton(o,(function(){return new r}))},e.prototype._registerType=function(e,t,n,o){void 0===o&&(o=!1),this._types.set(e,{id:e,type:t,dependencies:n,singleton:o})},e.prototype._singleton=function(e,t){return e.singleton?(this._singletons.has(e.id)||this._singletons.set(e.id,t()),this._singletons.get(e.id)):t()},e}();return t})()}));
//# sourceMappingURL=simple-typescript-ioc.js.map